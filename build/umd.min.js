(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],e):e(t.KuboxPreact={},t.preact)})(this,function(t,e){"use strict";var o="__KUBOX__",r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStore=function(){return this.props.store||this.context[o]},e.prototype.connect=function(t){if("function"==typeof t){var e=this.getStore(),o=e.state,r=e.actions;return t(o,r)}},e.prototype.render=function(t){var e=t.children;return this.connect(e[0])},e}(e.Component),n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.subscribe=function(t,e){var o=this;if(e=e||this.getStore(),!e)throw"Store undefined";var r=[].concat(t||"*").map(function(t){return e.subscribe(function(){return o.setState()},t)});this.unsubscribe=function(){r.forEach(function(t){return t()})}},e.prototype.componentWillMount=function(){this.subscribe(this.props.select)},e.prototype.componentWillReceiveProps=function(t){t=Object.assign({},this.props,t),this.unsubscribe&&this.unsubscribe(),this.subscribe(t.select,t.store)},e.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},e}(r),i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return t={},t[o]=this.props.store,t;var t},e.prototype.render=function(t){var e=t.children;return e[0]},e}(e.Component);t.nameSpace=o,t.Consumer=r,t.Subscriber=n,t.Provider=i,Object.defineProperty(t,"__esModule",{value:!0})});