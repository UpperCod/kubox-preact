(function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],o):o(t.KuboxPreact={},t.preact)})(this,function(t,o){"use strict";var e="__KUBOX__",n=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.getStore=function(){return this.props.store||this.context[e]},o.prototype.connect=function(t){if("function"==typeof t){var o=this.getStore(),e=o.state,n=o.actions;return t(e,n)}},o.prototype.render=function t(o){var e=o.children,t=o.render;return this.connect(t||e[0])},o}(o.Component),r=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.subscribe=function(t,o){var e=this;if(o=o||this.getStore(),!o)throw"Store undefined";var n=[].concat(t||"*").map(function(t){return o.subscribe(function(){return e.setState()},t)});this.unsubscribe=function(){n.forEach(function(t){return t()})}},o.prototype.componentWillMount=function(){this.subscribe(this.props.watch),this.connect(this.props.mount)},o.prototype.componentWillReceiveProps=function(t){t=Object.assign({},this.props,t),this.unsubscribe&&this.unsubscribe(),this.subscribe(t.watch,t.store)},o.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this.connect(this.props.unmount)},o}(n),i=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.getChildContext=function(){return t={},t[e]=this.props.store,t;var t},o.prototype.render=function(t){var o=t.children;return o[0]},o}(o.Component);t.PROVIDER=e,t.Static=n,t.Connect=r,t.Provider=i,Object.defineProperty(t,"__esModule",{value:!0})});