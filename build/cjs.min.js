"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var preact=require("preact"),PROVIDER="__KUBOX__",Connect=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStore=function(){return this.props.store||this.context[PROVIDER]},e.prototype.subscribe=function(t){var e=this,r=this.getStore();if(!r)throw"Store undefined";var o=[].concat(t||"*").map(function(t){return r.subscribe(function(){return e.setState()},t)});this.unsubscribe=function(){o.forEach(function(t){return t()})}},e.prototype.componentWillMount=function(){this.subscribe(this.props.watch)},e.prototype.componentWillReceiveProps=function(t){(t.watch||t.store)&&(this.unsubscribe&&this.unsubscribe(),this.subscribe(t.watch))},e.prototype.render=function(t){var e=t.children,r=this.getStore(),o=r.state,n=r.actions;return e[0](o,n)},e}(preact.Component),Provider=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return t={},t[PROVIDER]=this.props.store,t;var t},e.prototype.render=function(t){var e=t.children;return e[0]},e}(preact.Component);exports.PROVIDER=PROVIDER,exports.Connect=Connect,exports.Provider=Provider;